Привет.  Хочу улучшить форк устаревшего кода альтернативного ВК-мессенджера LunaVK, сделанный на UWP. Я использую Win. SDK 19041 и Min. Win. SDK 10240, чтобы обеспечить совместимость с довольно ранними версиями ретро-ОС Windows 10 Mobile. Программа уже компилируется, запускается,

В целом пашет, но есть огрехи:

1) в разделе нотификаций (уведомлений) сломан список пришедших уведомлений (вместо иконок польователя placeholder, ну и нет фрагмента текста уведомления; UI нотификаций должен же показывать от кого уведомление)

2) в разделе музыки вообще всё поломано (список муз. треков не отображается, в логах exception Exception thrown: 'System.ArgumentNullException' in System.Private.Uri.dll

Помоги мне разобраться с этой проблемой, пожалуйста. Подправь-там сям что-нибудь, чтобы работа с нотификациями и музыкой стала происходить успешно!

Сборку производи строго командой msbuild, а не dotnet build!

msbuild LunaVK.sln /p:Configuration=Debug /p:Platform=x64 /t:Build /p:AppxBundle=Never

И еще: я также временно в /Src добавил проекты Colibri, VkLib, Jupiter, Tasks  от другого ВК-мессенджера Colibri. Так вот, в этом приложении Colibri разделы нотификаций и музыки в целом корректны (хоть и очень упрощены). Вообщем, глянь проект Colibri, который использует проект (библиотеку) VkLib. Можешь смело задействовать api этой библиотеки VkLib и в проекте LunaVK, а то сейчас, по-моему, сейчас в LunaVK вместо api задействуется непонятный "велосипед" (захардкоженные прямые обращения)!


msbuild LunaVK.sln /t:Build /p:Configuration=Debug /p:Platform=x86 /p:AppxBundle=Never /v:minimal /clp:ErrorsOnly


----------------
Потестировал Уведомления!

- Что ожидал:
После загрузки ленты уведомлений данные сообществ будут корректно кэшироваться, и список уведомлений начнёт показывать правильные названия и аватарки групп

- Что получил Получил: лишь непонятный список, в котором вместо иконок плейсхолдеры, ну и нет фрагментов (сокращенного текста) самих уведомлений 

Потестировал Музыку.

- Что ожидал: После загрузки раздела музыки список треков нормально отобразиться.

- Что получил: Еще раз потестил раздел Музыка. Увидел лишь сообщение об ошибке: Value cannot be null. Parameter name: stringToEscape (1).

В логе отладки же лишь

Exception thrown: 'System.ArgumentNullException' in System.Private.CoreLib.ni.dll


--------------------


Уведомления
Сообщество На максималках опубликовало новый пост Чем ближе релиз Escape from Tarkov, тем больше..
час назад
Сообщество На максималках опубликовало новый пост Работа над экранизацией Mass Effect набирает..
час назад
Сообщество На максималках опубликовало новый пост Французские инсайдеры раскрыли детали пока..
три часа назад


Коротко и по существу.
Что я понимаю под «заголовком», «ссылкой» и «превью»
•	«Заголовок» — это RawItem.header из JSON уведомления (в твоём логе это строка вида '''[club3955455|Прогулки по Москве ...]''' posted a new post: [...]).
•	«Ссылка» — интерактивная часть в этом заголовке / action / action_url / additional_item.action.url — то, по чему пользователь кликает, чтобы перейти. Судя по описанию, то, что ты кликаешь («На максималках»), — это именно содержимое header (в разметке VK это [url|текст]), а не правое превью.
•	«Превью» — это мини‑изображения справа, которые берутся из ParsedParent.attachments или из RawItem.additional_item/main_item (метод GetPreviewUrls()).
Почему исключение может появляться
•	COMException обычно возникает, когда вызывается нативный UI API с неправильного потока или в момент, когда UI/Frame в некорректном состоянии. Я уже перевёл навигационные вызовы в Content_Tapped/Preview_Tapped на UI‑поток, но всё ещё не хватает деталей, чтобы точно локализовать проблему: исключение может вызываться внутри NavigatorImpl.NavigateToWallPostComments (там происходит навигация и возможная работа с фреймом) или при попытке открыть URI (Launcher) — и нативный стек покажет точную строчку.
Что мне нужно от тебя, чтобы быстро исправить
•	Полный текст исключения и стек вызовов (Exception Message + StackTrace). Если в отладчике видишь First-chance exception, скопируй стек. Это позволит точно понять, где падает COMException.
•	Уточни: кликаешь именно по тексту заголовка (имя группы в header), или по превью справа, или по мини‑аватарке? (в твоём сообщении ты писал «заголовок (а надо на заголовок, что ли?)» — нужно подтвердить).
Временный обход / что я могу сделать сразу
•	Самое простое и безопасное: при клике по заголовку не пытаться навигировать внутрь приложения (NavigateToWallPostComments), а сразу открыть action_url (веб‑ссылку на мобильную/веб‑версию записи). Это исключит возможные ошибки, связанные с навигацией внутри фрейма. Сделаю это, если хочешь — скажи, и я внесу правку.
•	Альтернативно — добавить подробное логирование (HResult, StackTrace) при поимке COMException, чтобы не только ловить, но и увидеть корень.
Резюме
•	Заголовок = RawItem.header (твоё «На максималках»), превью = картинки справа.
•	Пожалуйста пришли стек исключения (message + stack). Если хочешь — разреши заменить переход на прямое открытие action_url как временный обход — внедрю быстро.

Уффф... не смог добыть полный текст исключения. И где точку останова поставить, пока не догнал (эпизодически отвлекаюсь на др. проблемы, прости). Да, ты можешь попробовать заменить переход на прямое открытие action_url. Хорошая идея как временный обход. 

